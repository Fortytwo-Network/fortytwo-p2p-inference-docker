# INDEX-DIGEST sha256:936abff852736f951dab72d91a1b6337cf04217b2a77a5eaadc7c0f2f1ec1758
FROM debian:12-slim

LABEL network.fortytwo.image.title="Protocol Node"
LABEL network.fortytwo.image.authors="Aleksei Ivashov <aivashov@fortytwo.network>"
LABEL network.fortytwo.image.vendor="Fortytwo Network"
LABEL network.fortytwo.image.url="https://fortytwo.network"
LABEL network.fortytwo.image.source="https://github.com/Fortytwo-Network/fortytwo-node-setup"
LABEL network.fortytwo.image.licenses="Apache 2.0"

RUN apt-get update && apt-get install -y \
    ca-certificates \
    libssl3 \
    curl \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /workspace

ARG PATH_EXEC="/workspace/protocol"
ARG MODULE_NAME="protocol"

ENV PATH_EXEC=${PATH_EXEC}
ENV MODULE_NAME=${MODULE_NAME}

COPY scripts/install.sh . 
RUN chmod +x install.sh && sh ./install.sh

COPY scripts/cmd.sh . 
CMD ["/bin/sh", "/workspace/cmd.sh"]
